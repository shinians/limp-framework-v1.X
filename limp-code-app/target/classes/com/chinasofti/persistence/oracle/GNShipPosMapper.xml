<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.chinasofti.mapper.oracle.GNShipPosMapper" >
  <resultMap id="BaseResultMap" type="com.chinasofti.domain.GNShipPos" >
    <result column="CSP_ID" property="id" jdbcType="VARCHAR" />
    <result column="CSP_SHIPNO" property="shipno" jdbcType="VARCHAR" />
    <result column="CSP_SHIPNAME" property="shipname" jdbcType="VARCHAR" />
    <result column="CSP_SHIPPORT" property="shipport" jdbcType="VARCHAR" />
    <result column="CSP_RECTIME" property="rectime" jdbcType="VARCHAR" />
    <result column="CSP_LON" property="lon" jdbcType="VARCHAR" />
    <result column="CSP_LAT" property="lat" jdbcType="VARCHAR" />
    <result column="CSP_POSTYPE" property="postype" jdbcType="VARCHAR" />
    <result column="CSP_IDT" property="idt" jdbcType="VARCHAR" />
    <result column="CSP_POSTIME" property="postime" jdbcType="VARCHAR" />
    <result column="CSP_DIRECTION" property="direction" jdbcType="VARCHAR" />
    <result column="CSP_SPEED" property="speed" jdbcType="VARCHAR" />
    <result column="CSP_BOW" property="bow" jdbcType="VARCHAR" />
    <result column="CSP_TERMINAL_TYPE" property="terminalType" jdbcType="VARCHAR" />
    <result column="CSP_COMM_TYPE" property="commType" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    CSP_ID, CSP_SHIPNO, CSP_SHIPNAME, CSP_SHIPPORT, CSP_RECTIME, CSP_LON, CSP_LAT, CSP_POSTYPE, 
    CSP_IDT, CSP_POSTIME, CSP_DIRECTION, CSP_SPEED, CSP_BOW, CSP_TERMINAL_TYPE, CSP_COMM_TYPE
  </sql>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.chinasofti.domain.GNShipPosExample" >
    <include refid="OracleDialectPrefix" />
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from CIS_SHIP_POS_GN
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
    <include refid="OracleDialectSuffix" />
  </select>
  <delete id="deleteByExample" parameterType="com.chinasofti.domain.GNShipPosExample" >
    delete from CIS_SHIP_POS_GN
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.chinasofti.domain.GNShipPos" >
    insert into CIS_SHIP_POS_GN (CSP_ID, CSP_SHIPNO, CSP_SHIPNAME, 
      CSP_SHIPPORT, CSP_RECTIME, CSP_LON, 
      CSP_LAT, CSP_POSTYPE, CSP_IDT, 
      CSP_POSTIME, CSP_DIRECTION, CSP_SPEED, 
      CSP_BOW, CSP_TERMINAL_TYPE, CSP_COMM_TYPE
      )
    values (#{id,jdbcType=VARCHAR}, #{shipno,jdbcType=VARCHAR}, #{shipname,jdbcType=VARCHAR}, 
      #{shipport,jdbcType=VARCHAR}, #{rectime,jdbcType=VARCHAR}, #{lon,jdbcType=VARCHAR}, 
      #{lat,jdbcType=VARCHAR}, #{postype,jdbcType=VARCHAR}, #{idt,jdbcType=VARCHAR}, 
      #{postime,jdbcType=VARCHAR}, #{direction,jdbcType=VARCHAR}, #{speed,jdbcType=VARCHAR}, 
      #{bow,jdbcType=VARCHAR}, #{terminalType,jdbcType=VARCHAR}, #{commType,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.chinasofti.domain.GNShipPos" >
    insert into CIS_SHIP_POS_GN
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        CSP_ID,
      </if>
      <if test="shipno != null" >
        CSP_SHIPNO,
      </if>
      <if test="shipname != null" >
        CSP_SHIPNAME,
      </if>
      <if test="shipport != null" >
        CSP_SHIPPORT,
      </if>
      <if test="rectime != null" >
        CSP_RECTIME,
      </if>
      <if test="lon != null" >
        CSP_LON,
      </if>
      <if test="lat != null" >
        CSP_LAT,
      </if>
      <if test="postype != null" >
        CSP_POSTYPE,
      </if>
      <if test="idt != null" >
        CSP_IDT,
      </if>
      <if test="postime != null" >
        CSP_POSTIME,
      </if>
      <if test="direction != null" >
        CSP_DIRECTION,
      </if>
      <if test="speed != null" >
        CSP_SPEED,
      </if>
      <if test="bow != null" >
        CSP_BOW,
      </if>
      <if test="terminalType != null" >
        CSP_TERMINAL_TYPE,
      </if>
      <if test="commType != null" >
        CSP_COMM_TYPE,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="shipno != null" >
        #{shipno,jdbcType=VARCHAR},
      </if>
      <if test="shipname != null" >
        #{shipname,jdbcType=VARCHAR},
      </if>
      <if test="shipport != null" >
        #{shipport,jdbcType=VARCHAR},
      </if>
      <if test="rectime != null" >
        #{rectime,jdbcType=VARCHAR},
      </if>
      <if test="lon != null" >
        #{lon,jdbcType=VARCHAR},
      </if>
      <if test="lat != null" >
        #{lat,jdbcType=VARCHAR},
      </if>
      <if test="postype != null" >
        #{postype,jdbcType=VARCHAR},
      </if>
      <if test="idt != null" >
        #{idt,jdbcType=VARCHAR},
      </if>
      <if test="postime != null" >
        #{postime,jdbcType=VARCHAR},
      </if>
      <if test="direction != null" >
        #{direction,jdbcType=VARCHAR},
      </if>
      <if test="speed != null" >
        #{speed,jdbcType=VARCHAR},
      </if>
      <if test="bow != null" >
        #{bow,jdbcType=VARCHAR},
      </if>
      <if test="terminalType != null" >
        #{terminalType,jdbcType=VARCHAR},
      </if>
      <if test="commType != null" >
        #{commType,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.chinasofti.domain.GNShipPosExample" resultType="java.lang.Integer" >
    select count(*) from CIS_SHIP_POS_GN
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    update CIS_SHIP_POS_GN
    <set >
      <if test="record.id != null" >
        CSP_ID = #{record.id,jdbcType=VARCHAR},
      </if>
      <if test="record.shipno != null" >
        CSP_SHIPNO = #{record.shipno,jdbcType=VARCHAR},
      </if>
      <if test="record.shipname != null" >
        CSP_SHIPNAME = #{record.shipname,jdbcType=VARCHAR},
      </if>
      <if test="record.shipport != null" >
        CSP_SHIPPORT = #{record.shipport,jdbcType=VARCHAR},
      </if>
      <if test="record.rectime != null" >
        CSP_RECTIME = #{record.rectime,jdbcType=VARCHAR},
      </if>
      <if test="record.lon != null" >
        CSP_LON = #{record.lon,jdbcType=VARCHAR},
      </if>
      <if test="record.lat != null" >
        CSP_LAT = #{record.lat,jdbcType=VARCHAR},
      </if>
      <if test="record.postype != null" >
        CSP_POSTYPE = #{record.postype,jdbcType=VARCHAR},
      </if>
      <if test="record.idt != null" >
        CSP_IDT = #{record.idt,jdbcType=VARCHAR},
      </if>
      <if test="record.postime != null" >
        CSP_POSTIME = #{record.postime,jdbcType=VARCHAR},
      </if>
      <if test="record.direction != null" >
        CSP_DIRECTION = #{record.direction,jdbcType=VARCHAR},
      </if>
      <if test="record.speed != null" >
        CSP_SPEED = #{record.speed,jdbcType=VARCHAR},
      </if>
      <if test="record.bow != null" >
        CSP_BOW = #{record.bow,jdbcType=VARCHAR},
      </if>
      <if test="record.terminalType != null" >
        CSP_TERMINAL_TYPE = #{record.terminalType,jdbcType=VARCHAR},
      </if>
      <if test="record.commType != null" >
        CSP_COMM_TYPE = #{record.commType,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    update CIS_SHIP_POS_GN
    set CSP_ID = #{record.id,jdbcType=VARCHAR},
      CSP_SHIPNO = #{record.shipno,jdbcType=VARCHAR},
      CSP_SHIPNAME = #{record.shipname,jdbcType=VARCHAR},
      CSP_SHIPPORT = #{record.shipport,jdbcType=VARCHAR},
      CSP_RECTIME = #{record.rectime,jdbcType=VARCHAR},
      CSP_LON = #{record.lon,jdbcType=VARCHAR},
      CSP_LAT = #{record.lat,jdbcType=VARCHAR},
      CSP_POSTYPE = #{record.postype,jdbcType=VARCHAR},
      CSP_IDT = #{record.idt,jdbcType=VARCHAR},
      CSP_POSTIME = #{record.postime,jdbcType=VARCHAR},
      CSP_DIRECTION = #{record.direction,jdbcType=VARCHAR},
      CSP_SPEED = #{record.speed,jdbcType=VARCHAR},
      CSP_BOW = #{record.bow,jdbcType=VARCHAR},
      CSP_TERMINAL_TYPE = #{record.terminalType,jdbcType=VARCHAR},
      CSP_COMM_TYPE = #{record.commType,jdbcType=VARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <sql id="OracleDialectPrefix" >
    <if test="page != null" >
      select * from ( select row_.*, rownum rownum_ from ( 
    </if>
  </sql>
  <sql id="OracleDialectSuffix" >
    <if test="page != null" >
      <![CDATA[ ) row_ ) where rownum_ > #{page.start} and rownum_ <= #{page.end} ]]>
    </if>
  </sql>

  <select id="getCodeByName" parameterType="java.lang.String" resultType="java.lang.String">
    select t.cs_shipcode from cis_shipinfo t where t.cs_shipname = #{name}
  </select>
  <select id="getShipMapList" resultType="java.util.Map">
    select * from cis_ship_temp t
  </select>
  <insert id="insertGNShipPosList" parameterType="com.chinasofti.domain.GNShipPos" >
    insert into CIS_SHIP_POS_GN (CSP_ID, CSP_SHIPNO, CSP_SHIPNAME,
    CSP_SHIPPORT, CSP_RECTIME, CSP_LON,
    CSP_LAT, CSP_POSTYPE, CSP_IDT,
    CSP_POSTIME, CSP_DIRECTION, CSP_SPEED,
    CSP_BOW, CSP_TERMINAL_TYPE, CSP_COMM_TYPE
    )
    select t.* from (
    <foreach collection="list" item="item" index="index" separator="UNION ALL">
      select
      #{item.id,jdbcType=VARCHAR},
      select cs_shipcode from cis_shipinfo where cs_shipname =#{item.shipname,jdbcType=VARCHAR} and rownum=1
      , #{item.shipname,jdbcType=VARCHAR},
      #{item.shipport,jdbcType=VARCHAR}, #{item.rectime,jdbcType=VARCHAR}, #{item.lon,jdbcType=VARCHAR},
      #{item.lat,jdbcType=VARCHAR}, #{item.postype,jdbcType=VARCHAR}, #{item.idt,jdbcType=VARCHAR},
      #{item.postime,jdbcType=VARCHAR}, #{item.direction,jdbcType=VARCHAR}, #{item.speed,jdbcType=VARCHAR},
      #{item.bow,jdbcType=VARCHAR}, #{item.terminalType,jdbcType=VARCHAR}, #{item.commType,jdbcType=VARCHAR}
      from dual
    </foreach>
    ) t
  </insert>
  <select id="getByShipShow" resultType="Map">
    select CSP_LON "lon",CSP_LAT "lat",CSP_DIRECTION "direction",CSP_SPEED "speed" from cis_ship_pos_gn
    <if test="ship.shipcode != null">
      WHERE csp_shipno = #{ship.shipcode}
    </if>
  </select>

  <select id="getByCode" resultMap="BaseResultMap">
    select * from cis_ship_pos_gn
    WHERE csp_shipno = #{shipcode}
    AND CSP_POSTIME = (select max(CSP_POSTIME) from cis_ship_pos_gn where csp_shipno = #{shipcode})
    and rownum=1
  </select>
</mapper>